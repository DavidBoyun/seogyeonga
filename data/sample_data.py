"""
샘플 데이터 로더
"""
from datetime import date, timedelta
from database import init_db, get_session, upsert_auction
from services import calculate_risk

# 샘플 경매 물건 데이터
SAMPLE_AUCTIONS = [
    {
        "court": "서울중앙지방법원",
        "case_no": "2024타경12345",
        "address": "서울특별시 강남구 대치동 123-45 래미안대치아파트 101동 1501호",
        "gugun": "강남구",
        "dong": "대치동",
        "apt_name": "래미안대치아파트",
        "appraisal_price": 2500000000,
        "min_price": 2000000000,
        "auction_date": date.today() + timedelta(days=5),
        "auction_count": 1,
        "area": 84.5,
        "floor": "15층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "권리관계 단순",
        "lat": 37.4947,
        "lng": 127.0633,
    },
    {
        "court": "서울동부지방법원",
        "case_no": "2024타경23456",
        "address": "서울특별시 송파구 잠실동 234-56 잠실엘스 102동 2305호",
        "gugun": "송파구",
        "dong": "잠실동",
        "apt_name": "잠실엘스",
        "appraisal_price": 2200000000,
        "min_price": 1540000000,
        "auction_date": date.today() + timedelta(days=3),
        "auction_count": 2,
        "area": 79.8,
        "floor": "23층",
        "has_tenant": True,
        "has_senior_rights": False,
        "remarks": "임차인 있음 (보증금 확인 필요)",
        "lat": 37.5148,
        "lng": 127.1008,
    },
    {
        "court": "서울남부지방법원",
        "case_no": "2024타경34567",
        "address": "서울특별시 마포구 상암동 345-67 상암월드컵파크 201동 805호",
        "gugun": "마포구",
        "dong": "상암동",
        "apt_name": "상암월드컵파크",
        "appraisal_price": 980000000,
        "min_price": 784000000,
        "auction_date": date.today() + timedelta(days=7),
        "auction_count": 1,
        "area": 59.9,
        "floor": "8층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.5769,
        "lng": 126.8859,
    },
    {
        "court": "서울중앙지방법원",
        "case_no": "2024타경45678",
        "address": "서울특별시 서초구 반포동 456-78 반포자이 301동 1201호",
        "gugun": "서초구",
        "dong": "반포동",
        "apt_name": "반포자이",
        "appraisal_price": 3500000000,
        "min_price": 2100000000,
        "auction_date": date.today() + timedelta(days=10),
        "auction_count": 3,
        "area": 114.7,
        "floor": "12층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "3차 유찰 물건",
        "lat": 37.5045,
        "lng": 127.0089,
    },
    {
        "court": "서울북부지방법원",
        "case_no": "2024타경56789",
        "address": "서울특별시 노원구 상계동 567-89 상계주공5단지 105동 304호",
        "gugun": "노원구",
        "dong": "상계동",
        "apt_name": "상계주공5단지",
        "appraisal_price": 450000000,
        "min_price": 360000000,
        "auction_date": date.today() + timedelta(days=14),
        "auction_count": 1,
        "area": 49.2,
        "floor": "3층",
        "has_tenant": True,
        "has_senior_rights": False,
        "remarks": "임차인 대항력 있음",
        "lat": 37.6530,
        "lng": 127.0687,
    },
    {
        "court": "서울서부지방법원",
        "case_no": "2024타경67890",
        "address": "서울특별시 영등포구 여의도동 678-90 여의도자이 501동 2001호",
        "gugun": "영등포구",
        "dong": "여의도동",
        "apt_name": "여의도자이",
        "appraisal_price": 1800000000,
        "min_price": 1440000000,
        "auction_date": date.today() + timedelta(days=2),
        "auction_count": 1,
        "area": 84.9,
        "floor": "20층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.5247,
        "lng": 126.9226,
    },
    {
        "court": "서울동부지방법원",
        "case_no": "2024타경78901",
        "address": "서울특별시 강동구 명일동 789-01 고덕래미안 202동 1103호",
        "gugun": "강동구",
        "dong": "명일동",
        "apt_name": "고덕래미안",
        "appraisal_price": 1100000000,
        "min_price": 660000000,
        "auction_date": date.today() + timedelta(days=21),
        "auction_count": 3,
        "area": 74.5,
        "floor": "11층",
        "has_tenant": False,
        "has_senior_rights": True,
        "remarks": "선순위전세권 존재",
        "lat": 37.5487,
        "lng": 127.1543,
    },
    {
        "court": "서울중앙지방법원",
        "case_no": "2024타경89012",
        "address": "서울특별시 용산구 한남동 890-12 한남더힐 타워1 3505호",
        "gugun": "용산구",
        "dong": "한남동",
        "apt_name": "한남더힐",
        "appraisal_price": 6500000000,
        "min_price": 5200000000,
        "auction_date": date.today() + timedelta(days=8),
        "auction_count": 1,
        "area": 198.3,
        "floor": "35층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.5344,
        "lng": 126.9988,
    },
    {
        "court": "서울남부지방법원",
        "case_no": "2024타경90123",
        "address": "서울특별시 구로구 개봉동 901-23 개봉푸르지오 103동 704호",
        "gugun": "구로구",
        "dong": "개봉동",
        "apt_name": "개봉푸르지오",
        "appraisal_price": 520000000,
        "min_price": 416000000,
        "auction_date": date.today() + timedelta(days=6),
        "auction_count": 1,
        "area": 59.9,
        "floor": "7층",
        "has_tenant": True,
        "has_senior_rights": False,
        "remarks": "점유자 확인 필요",
        "lat": 37.4879,
        "lng": 126.8599,
    },
    {
        "court": "서울북부지방법원",
        "case_no": "2024타경01234",
        "address": "서울특별시 성북구 길음동 012-34 래미안길음센터피스 201동 1505호",
        "gugun": "성북구",
        "dong": "길음동",
        "apt_name": "래미안길음센터피스",
        "appraisal_price": 880000000,
        "min_price": 704000000,
        "auction_date": date.today() + timedelta(days=12),
        "auction_count": 1,
        "area": 84.7,
        "floor": "15층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.6030,
        "lng": 127.0258,
    },
    {
        "court": "서울서부지방법원",
        "case_no": "2024타경11111",
        "address": "서울특별시 은평구 녹번동 111-11 은평뉴타운 304동 2201호",
        "gugun": "은평구",
        "dong": "녹번동",
        "apt_name": "은평뉴타운",
        "appraisal_price": 720000000,
        "min_price": 432000000,
        "auction_date": date.today() + timedelta(days=4),
        "auction_count": 3,
        "area": 74.2,
        "floor": "22층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "유치권 주장 있음",
        "lat": 37.6102,
        "lng": 126.9337,
    },
    {
        "court": "서울동부지방법원",
        "case_no": "2024타경22222",
        "address": "서울특별시 광진구 구의동 222-22 광장현대 105동 503호",
        "gugun": "광진구",
        "dong": "구의동",
        "apt_name": "광장현대아파트",
        "appraisal_price": 650000000,
        "min_price": 520000000,
        "auction_date": date.today() + timedelta(days=9),
        "auction_count": 1,
        "area": 65.8,
        "floor": "5층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.5437,
        "lng": 127.0836,
    },
    {
        "court": "서울중앙지방법원",
        "case_no": "2024타경33333",
        "address": "서울특별시 강남구 도곡동 333-33 도곡렉슬 102동 1807호",
        "gugun": "강남구",
        "dong": "도곡동",
        "apt_name": "도곡렉슬",
        "appraisal_price": 1950000000,
        "min_price": 1365000000,
        "auction_date": date.today() + timedelta(days=15),
        "auction_count": 2,
        "area": 84.9,
        "floor": "18층",
        "has_tenant": True,
        "has_senior_rights": False,
        "remarks": "명도 소송 진행 중",
        "lat": 37.4870,
        "lng": 127.0449,
    },
    {
        "court": "서울남부지방법원",
        "case_no": "2024타경44444",
        "address": "서울특별시 동작구 상도동 444-44 래미안상도3차 203동 1104호",
        "gugun": "동작구",
        "dong": "상도동",
        "apt_name": "래미안상도3차",
        "appraisal_price": 850000000,
        "min_price": 680000000,
        "auction_date": date.today() + timedelta(days=11),
        "auction_count": 1,
        "area": 76.4,
        "floor": "11층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "",
        "lat": 37.4976,
        "lng": 126.9522,
    },
    {
        "court": "서울북부지방법원",
        "case_no": "2024타경55555",
        "address": "서울특별시 도봉구 창동 555-55 북한산아이파크 107동 603호",
        "gugun": "도봉구",
        "dong": "창동",
        "apt_name": "북한산아이파크",
        "appraisal_price": 580000000,
        "min_price": 406000000,
        "auction_date": date.today() + timedelta(days=1),
        "auction_count": 2,
        "area": 59.5,
        "floor": "6층",
        "has_tenant": False,
        "has_senior_rights": False,
        "remarks": "가압류 있음",
        "lat": 37.6496,
        "lng": 127.0429,
    },
]


def load_sample_data():
    """샘플 데이터 DB에 로드"""
    init_db()

    count = 0
    for auction_data in SAMPLE_AUCTIONS:
        # 위험도 계산
        risk_level, risk_reason = calculate_risk(auction_data)
        auction_data['risk_level'] = risk_level
        auction_data['risk_reason'] = risk_reason

        # DB 저장
        upsert_auction(auction_data)
        count += 1

    print(f"✅ {count}개 샘플 물건 로드 완료")
    return count


if __name__ == "__main__":
    load_sample_data()
